{% extends "network/layout.html" %}
{% load static %}
{% block script %}
    <script src="{% static 'network/wizbook.js' %}"></script>
{% endblock %}

{% block body %}
    {% csrf_token %}
    <div id="user-info">
        <h3>{{ username }}'s profile</h3>
        {% if profile_pic %}<img src="{{ profile_pic }}" alt="{{ username }}" height="400px" /><br />{% endif %}
        {% if firstname and lastname %}{{ firstname }} {{ lastname }}<br />{% endif %}
        {% if email %}Email address: {{ email }}<br />{% endif %}
        {% if birthday %}Birthday: {{ birthday }}<br />{% endif %}
        {% if request.user.username != username %}<a href="{% url 'add_friend' username %}"><button>{% if friend %}Unfriend{% else %}Add friend{% endif %}</button></a>{% endif %}
    </div>
    {% if posts %}
        <div id="posts">
            {% for post in posts %}
                <div class="post">
                    <img class="smallpic" src="{{ post.author.profile_picture }}" />
                    At {{ post.timestamp }}, <a href="{% url 'view_profile' post.author.username %}">{{ post.author.username }}</a> ({{ post.author.first_name }} {{ post.author.last_name }}) wrote:<br />
                    <span id="post{{ post.id}}">{{ post.body }}</span><br />
                    {% if user == post.author %}
                        <a href="" class="edit" id="edit{{ post.id }}">‚úèÔ∏è</a>
                    {% else %}
                        <a href="" class="like" id="like{{ post.id }}">‚ù§</a>
                    {% endif %}
                    <a class="likes" id="likes{{ post.id }}">{{ post.numlikes }}</a> users like this. | 
                    <a href="" class="comment" id="comment{{ post.id }}">üí¨</a>
                    <a class="comments" id="comments{{ post.id }}">{{ post.numcomments }}</a><br />
                    {% for comment in post.comments %}
                        <br /><img class="tinypic" src="{{ comment.author.profile_picture}}" />{{ comment.author.first_name }} {{ comment.author.last_name }} replied: {{ comment.body }}
                    {% endfor %}
                </div>
            {% endfor %}
            <nav aria-label="Page navigation">
                <ul class="pagination">
                    {% if posts.has_previous %}
                        <li class="page-item"><a class="page-link" href="?page={{ posts.previous_page_number }}">Previous</a></li>
                    {% endif %}
                    <li class="page-item"><a class="page-link" href="">Page {{ posts.number }}</a></li>
                    {% if posts.has_next %}
                        <li class="page-item"><a class="page-link" href="?page={{ posts.next_page_number }}">Next</a></li>
                    {% endif %}
                </ul>
            </nav>
        </div>
        <div id="edit-box">
            <form id="edit-form">
                {% csrf_token %}
                <textarea id="edit-body">
                    The innerHTML of this textarea is replaced with the body of the edited post.
                </textarea> <button id="save-edit">Save</button>
            </form>
        </div>
    {% endif %}
{% endblock %}